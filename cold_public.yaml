#
# cold.yaml defines the controlled object list and datum application's
# Public JSON API running via datasetd.
#
# @author: R. S. Doiel <rsdoiel@caltech.edu>
#
host: localhost:8481
# This htdocs directory is provided by cold_ui so we don't enable it.
htdocs: htdocs
collections:
  # Each collection is an object. The path prefix is
  # /api/<dataset_name>/...
  - dataset: cold_ui/people.ds
    query:
      people_names: select json_object('clpid', src->'clpid', 'family_name', src->'family_name', 'given_name', src->'given_name') as src from people order by src->'family_name' ASC, src->'given_name' ASC;
    # What follows are object level permissions
    keys: true
    create: false
    read: true
    update: false
    delete: false
    # These are attachment related permissions
    attachments: false
    attach: false
    retrieve: false
    prune: false
    # These are frame level permissions
    frame_read: false
    frame_write: false
    # This sets versioning behavior
    versions: false
  - dataset: cold_ui/groups.ds
    query:
      group_names: select json_object('clgid', src->'clgid', 'group_name', src->'name') as src from groups order by src->'name' ASC;
    # What follows are object level permissions
    keys: true
    create: false
    read: true
    update: false
    delete: false
    # These are attachment related permissions
    attachments: false
    attach: false
    retrieve: false
    prune: false
    # These are frame level permissions
    frame_read: false
    frame_write: false
    # This sets versioning behavior
    versions: false
