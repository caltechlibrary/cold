<!DOCTYPE html>
<html lang="en">
<head>
    <title>COLD (Controlled Object List and Datum (Concept))</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://caltechlibrary.github.io/css/site.css">
</head>
<body>
<header>
<a href="http://library.caltech.edu" title="link to Caltech Library Homepage"><img src="https://caltechlibrary.github.io/assets/liblogo.gif" alt="Caltech Library logo"></a>
</header>
<nav>
<ul>
    <li><a href="/">Home</a></li>
    <li><a href="index.html">README</a></li>
    <li><a href="LICENSE">LICENSE</a></li>
    <li><a href="install.html">INSTALL</a></li>
    <li><a href="user_manual.html">User Manual</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="https://github.com/caltechlibrary/cold">GitHub</a></li>
</ul>
</nav>

<section>
<h1 id="name">NAME</h1>
<p>cold</p>
<h1 id="synopsis">SYNOPSIS</h1>
<p>cold [OPTIONS] [SETTINGS_FILENAME]</p>
<h1 id="description">DESCRIPTION</h1>
<p>Run the controlled object list and datum.</p>
<p><strong>cold</strong> implements a web service to maintain a
controlled list of objects such as Caltech Library uses for crosswalking
data using pid associated with a person, group or funding source. It is
also used to maintain system independant vocabularies.</p>
<h1 id="requirements">Requirements</h1>
<ul>
<li>Dataset &gt;= 2.1.15</li>
<li>Deno &gt;= 1.44</li>
<li>Pandoc &gt; 3.1 (for building repository documentation)</li>
</ul>
<h1 id="overview">Overview</h1>
<p>Caltech Library maintains a list of people, groups and funders and
their related pids. This started being managed in Google Sheets, then in
CSV files but the number of objects in envoled has increased and it make
sense to provide a more robust implementation allowing for easier
curation of the list. The objects are relatively flat with the exception
of the name attribute. Here’s an example JSON object representing R. S.
Doiel showing the internal identifier named “cl_people_id”, name object,
email, orcid and ‘<span class="citation"
data-cites="affiliation">@affiliation</span>’ which contains a ROR.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;cl_people_id&quot;</span><span class="fu">:</span> <span class="st">&quot;Doiel-R-S&quot;</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;family&quot;</span><span class="fu">:</span> <span class="st">&quot;Doiel&quot;</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;given&quot;</span><span class="fu">:</span> <span class="st">&quot;Robert&quot;</span><span class="fu">,</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;display_name&quot;</span><span class="fu">:</span> <span class="st">&quot;R. S. Doiel&quot;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;email&quot;</span><span class="fu">:</span> <span class="st">&quot;rsdoiel@caltech.edu&quot;</span><span class="fu">,</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;orcid: &quot;</span><span class="er">0000-0003-0900-6903</span><span class="dt">&quot;,</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="dt">    &quot;</span><span class="er">ror</span><span class="dt">&quot;: &quot;</span><span class="er">https</span><span class="fu">:</span><span class="er">//ror.org/05dxps055</span><span class="st">&quot;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="st">}</span></span></code></pre></div>
<p>Data like this can easily be manage in Postgres and then made
available as a JSON data source via PostgREST. The prototype Newt let’s
us easily integrate PostgREST results with Pandoc server. As a result
<strong>cold</strong> is now a Newt based web application. It supports
not just Caltech related People, Groups and Funders but also additional
vocabularies which we need to cordinate between systems (e.g. RDM
instances or publication systems like feeds.library.caltech.edu).</p>
<h1 id="build-on-dataset-collections">Build on dataset collections</h1>
<p>This iteration of <strong>cold</strong> is implemented using dataset
collections and the datasetd web service. The
<code>cold_public.yaml</code> configures datasetd to provide a read only
JSON API as well as static file service.</p>
<p>In the release we support two collections collections, groups.ds and
people.ds. Additional collections will be added to support addition
types of object lists (e.g. funders, isni mappings, doi prefix
mappings).</p>
<p>Each type of list is has its own model. Each model is implemented as
a TypeScript interface. A collection of functions are also provided to
work with the various TypeScript interfaces. These are rendered as
JavaScript to support browser side widgets where appropriate.</p>
<p>Deno provides the middle layer (middleware) between datasetd and your
front end web server. You can start the middleware using a Deno task.
There is also one supplied to start datasetd. In development you would
execute these from a shell session(s). In production you should wrap
these services in a systemd script (examples included in this
repository).</p>
<h2 id="end-points">End Points</h2>
<p>The following end point descriptions support the GET method. They
could be prefixed with additional path elements in a production setting
(e.g. <code>/apps/cold/...</code>).</p>
<dl>
<dt><code>/</code></dt>
<dd>
Description of the service (provided by htdocs/index.html)
</dd>
<dt><code>/api/version</code></dt>
<dd>
Returns the version number of the service based on the value set in the
codemeta.json when the make command has been run to (re) version.sql
</dd>
<dt><code>/api/people.ds</code></dt>
<dd>
Returns a list of “cl_people_id” managed by <em>cold</em> as an HTML
content.
</dd>
<dt><code>/api/people.ds/{CL_PEOPLE_ID}</code></dt>
<dd>
For a GET returns a people object, a POST will create the people object,
PUT will replace the people object, PATCH will replace part of an object
and DELETE will remove the people object
</dd>
<dt><code>/api/groups.ds</code></dt>
<dd>
Returns a list of “cl_group_id” managed by <em>cold</em>
</dd>
<dt><code>/api/groups.ds/{CL_GROUP_ID}</code></dt>
<dd>
For a GET returns a group object, a POST will create the group object,
PUT will replace the group object, PATCH will replace part of an object
and DELETE will remove the group object
</dd>
<dt><code>/api/funder.ds</code></dt>
<dd>
Returns a list of “cl_funder” managed by <em>cold</em>
</dd>
<dt><code>/api/funder.ds/{CL_funder_ID}</code></dt>
<dd>
For a GET returns a funder object, a PUT will create the funder object,
POST will replace the funder object and DELETE will remove the funder
object
</dd>
<dt><code>/api/&lt;&lt;COLLDECTION_NAME&gt;&gt;/query/crosswalk/&lt;&lt;IDENTIFIER_NAME&gt;&gt;/&lt;&lt;IDENTIFIER_NAME&gt;&gt;</code></dt>
<dd>
Returns help on how to crosswalk from one identifier to the internal
identifier
</dd>
</dl>
<h2 id="vocabularies">Vocabularies</h2>
<p><em>cold</em> also supports end points for stable vocabularies
mapping an indentifier to a normalized name. These are set at compile
time because they are so slow changing.</p>
<dl>
<dt><code>/api/subject.ds</code></dt>
<dd>
Returns a list of all the subject ids (codes)
</dd>
<dt><code>/api/subjects.ds/{SUBJECT_ID}</code></dt>
<dd>
Returns the normalized text string for that subject id
</dd>
<dt><code>/api/issn.ds</code></dt>
<dd>
Returns a list of issn that are mapped to a publisher name
</dd>
<dt><code>/api/issn.ds/{ISSN}</code></dt>
<dd>
Returns the normalized publisher name for that ISSN
</dd>
<dt><code>/api/doi_prefix.ds</code></dt>
<dd>
Returns a list of DOI prefixes that map to a normalize name
</dd>
<dt><code>/api/doi_prefix.ds/{DOI_PREFIX}</code></dt>
<dd>
Returns the normalized publisher name for that DOI prefix
</dd>
</dl>
</section>

<footer>
<span>&copy; 2022 <a href="https://www.library.caltech.edu/copyright">Caltech Library</a></span>
<address>1200 E California Blvd, Mail Code 1-32, Pasadena, CA 91125-3200</address>
<span><a href="mailto:library@caltech.edu">Email Us</a></span>
<span>Phone: <a href="tel:+1-626-395-3405">(626)395-3405</a></span>
</footer>
</body>
</html>
